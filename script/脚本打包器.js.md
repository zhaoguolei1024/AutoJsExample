 # 脚本打包器.js
```
//console.show();
//悬浮窗样式
xa=b64("dmFyIHdpbmRvdz0gZmxvYXR5LndpbmRvdygKICAKICAgPHZlcnRpY2FsPgogICA8bGluZWFyPgogICA8YnV0dG9uIGlkPSJhY3Rpb24iIHRleHQ9IuWKqSIgdz0iNDAiIGg9IjQwIiBjb2xvcj0iI2ZmZmZmZiIgIG1hcmdpbj0iMCIgYmc9IiM5OTAwMDAwMCIvPgogICA8L2xpbmVhcj4KICAgPC92ZXJ0aWNhbD4KIAopOwp2YXIgd2luZG93MiA9IGZsb2F0eS53aW5kb3coCiAgCiAKICAgPGdyaWQgaWQ9ImFuIiBzcGFuQ291bnQ9IjQiIGg9IioiPg0KICAgICAgICAgICAgPHRleHQgdGV4dD0ie3t0aGlzfX0iIGNvbG9yPSIjZmZmZmZmIiBncmF2aXR5PSJjZW50ZXIiIGg9IjQwIiB3PSI0MCIgbWFyZ2luPSIwIDEgMSAwIiBiZz0iIzk5MDAwMDAwIi8+DQogICA8L2dyaWQ+IAogCiAKKTsKeHM9MDsKdmFyIGV4ZWN1dGlvbiA9IG51bGw7CgovL+iusOW9leaMiemUruiiq+aMieS4i+aXtueahOinpuaRuOWdkOaghwp2YXIgeCA9IDAsCiAgICB5ID0gMDsKLy/orrDlvZXmjInplK7ooqvmjInkuIvml7bnmoTmgqzmta7nqpfkvY3nva4KdmFyIHdpbmRvd1gsIHdpbmRvd1k7Ci8v6K6w5b2V5oyJ6ZSu6KKr5oyJ5LiL55qE5pe26Ze05Lul5L6/5Yik5pat6ZW/5oyJ562J5Yqo5L2cCnZhciBkb3duVGltZTsKd2luZG93LmFjdGlvbi5zZXRPblRvdWNoTGlzdGVuZXIoZnVuY3Rpb24odmlldywgZXZlbnQpIHsKICAgIHN3aXRjaCAoZXZlbnQuZ2V0QWN0aW9uKCkpIHsKICAgICAgICBjYXNlIGV2ZW50LkFDVElPTl9ET1dOOgogICAgICAgICAgICB4ID0gZXZlbnQuZ2V0UmF3WCgpOwogICAgICAgICAgICB5ID0gZXZlbnQuZ2V0UmF3WSgpOwogICAgICAgICAgICB3aW5kb3dYID0gd2luZG93LmdldFgoKTsKICAgICAgICAgICAgd2luZG93WSA9IHdpbmRvdy5nZXRZKCk7CiAgICAgICAgICAgIGRvd25UaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGNhc2UgZXZlbnQuQUNUSU9OX01PVkU6CiAgICAgICAgICAgIC8v56e75Yqo5omL5oyH5pe26LCD5pW05oKs5rWu56qX5L2N572uCiAgICAgICAgICAgIGlmKHhzPT0wKXsKICAgICAgICAgICAgd2luZG93LnNldFBvc2l0aW9uKHdpbmRvd1ggKyAoZXZlbnQuZ2V0UmF3WCgpIC0geCksCiAgICAgICAgICAgICAgICB3aW5kb3dZICsgKGV2ZW50LmdldFJhd1koKSAtIHkpKTt9CiAgICAgICAgICAgIC8vIGlmKHhzPT0xKXsgCiAgICAgICAgICAgICAvLyAgIHdpbmRvdzIuc2V0UG9zaXRpb24od2luZG93WCArIChldmVudC5nZXRSYXdYKCkgLSB4KSwKICAgICAgICAgICAgLy8gICAgd2luZG93WSArIChldmVudC5nZXRSYXdZKCkgLSB5KSs4Mik7CiAgICAgICAgICAvLyB9CiAgICAgICAgICAgIC8v5aaC5p6c5oyJ5LiL55qE5pe26Ze06LaF6L+HMS4156eS5Yik5pat5Li66ZW/5oyJ77yM6YCA5Ye66ISa5pysCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGNhc2UgZXZlbnQuQUNUSU9OX1VQOgogICAgICAgICAgICAvL+aJi+aMh+W8uei1t+aXtuWmguaenOWBj+enu+W+iOWwj+WImeWIpOaWreS4uueCueWHuwogICAgICAgICAgICBpZiAoTWF0aC5hYnMoZXZlbnQuZ2V0UmF3WSgpIC0geSkgPCA1ICYmIE1hdGguYWJzKGV2ZW50LmdldFJhd1goKSAtIHgpIDwgNSkgewogICAgICAgICAgICAgICAgdGhyZWFkcy5zdGFydChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBvbkNsaWNrKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwp9KTsKd2luZG93Mi5zZXRQb3NpdGlvbigxMDAwMCwxMDAwMCk7CiAgICAgIApmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgaWYgKHhzPT0xKSB7CiAgICAgIHhzPTA7CiAgICAgIHdpbmRvdzIuc2V0UG9zaXRpb24oMTAwMDAsMTAwMDApOwp1aS5ydW4oKCk9Pnt3aW5kb3cuYWN0aW9uLnRleHQoIuWKqSIpO30pOyAgICAgICAgCiAgICB9IGVsc2UgewogICAgICAgIHhzPTE7CiAgICAgICAgd2luZG93Mi5zZXRQb3NpdGlvbih3aW5kb3cuZ2V0WCgpLHdpbmRvdy5nZXRZKCkrODIpOwogICAgICAgIHVpLnJ1bigoKT0+e3dpbmRvdy5hY3Rpb24udGV4dCgiXyIpO30pOyAgICAgICAKICAgIH0KfQoK");
xb=b64("CmpiLnB1c2goIiIpOwpsdD1qYi5sZW5ndGg7CmxoPShwYXJzZUludChsdC80KSsxKSo0LWx0Owpmb3IoaT0wO2k8bGg7aSsrKXtqYi5wdXNoKCIiKTt9CmpiW2piLmxlbmd0aC0xXT0i6YCA5Ye6IjsKCnVpLnJ1bigoKT0+ewp3aW5kb3cyLmFuLnNldERhdGFTb3VyY2UoamIpOwp9KTsKd2luZG93Mi5hbi5vbigiaXRlbV9jbGljayIsIGZ1bmN0aW9uKGl0ZW0xLGl0ZW0yKXsNCiAgaWYoaXRlbTI9PShqYi5sZW5ndGgtMSkpewogICAgdGhyZWFkcy5zdGFydChmdW5jdGlvbigpewogICAgICAgIHZhciBjbGVhciA9IGNvbmZpcm0oIuecn+eahOimgemAgOWHuuWQlz8iKTsKaWYoY2xlYXIpewogICAgZXhpdCgpOwp9CiAgIAogICAgfSk7CiAKICAgfWVsc2V7ZW5naW5lcy5leGVjU2NyaXB0KGpiW2l0ZW0yXSxucltpdGVtMl0pO30NCn0pOwoKZnVuY3Rpb24gYjY0KHN0cil7CnJldHVybiBqYXZhLmxhbmcuU3RyaW5nKGFuZHJvaWQudXRpbC5CYXNlNjQuZGVjb2RlKGphdmEubGFuZy5TdHJpbmcoc3RyKS5nZXRCeXRlcygpLDApKTsKfQoKd2hpbGUodHJ1ZSl7dWkucnVuKCgpPT57d2luZG93LmFjdGlvbi50ZXh0KHNzZGpzKCkpO30pOyAgICAgICAgCnNsZWVwKDEwMCk7fQ==");
//弹框样式
xdjs=b64("ZnVuY3Rpb24gc3NkanMoKSB7CiB2YXIgc2pweT0zNTAwOy8v5pe26Ze05YGP56e7CiAgICBmdW5jdGlvbiBzc2RzeXNqKCkgewogICAgICAgIHZhciBhcHBsZTAgPSBuZXcgRGF0ZSgobmV3IERhdGUoKS5nZXRUaW1lKCkpICsgc2pweSk7CiAgICAgICAgdmFyIGFwcGxlaCA9IGFwcGxlMC5nZXRIb3VycygpOwogICAgICAgIHZhciBhcHBsZW0gPSBhcHBsZTAuZ2V0TWludXRlcygpOwogICAgICAgIHZhciBhcHBsZXMgPSBhcHBsZTAuZ2V0U2Vjb25kcygpOwogICAgICAgIHZhciBhcHBsZXpzID0gYXBwbGVoICogNjAgKiA2MCArIGFwcGxlbSAqIDYwICsgYXBwbGVzOwogICAgICAgIHZhciBhcHBsZXN5ID0gYXBwbGV6cyAlIDI0MDA7CiAgICAgICAgcmV0dXJuIGFwcGxlc3k7CiAgICB9CgogICAgZnVuY3Rpb24gc2pnc2goZnl4c2opIHsKICAgICAgICB2YXIgdG1wMCA9IHBhcnNlSW50KGZ5eHNqIC8gNjApOwogICAgICAgIHZhciB0bXAxID0gZnl4c2ogJSA2MDsKICAgICAgICByZXR1cm4gdG1wMCArICI6IiArIHRtcDE7CiAgICB9CgogICAgcmV0dXJuIHNqZ3NoKDI0MDAgLSBzc2RzeXNqKCkpOwp9Cg==");
a=b64("dmFyIHdpbmRvdyA9IGZsb2F0eS53aW5kb3coCiAgICA8ZnJhbWU+PGxpbmVhcj4KICAgICAgICA8YnV0dG9uIGlkPSJhY3Rpb24iIHRleHQ9IuWKqSIgdz0iNDAiIGg9IjQwIiBjb2xvcj0iI2ZmZmZmZiIgYmc9IiM3NzAwMDAwMCIvPgogICA8L2xpbmVhcj4gPC9mcmFtZT4KKTsKCgp2YXIgZXhlY3V0aW9uID0gbnVsbDsKCi8v6K6w5b2V5oyJ6ZSu6KKr5oyJ5LiL5pe255qE6Kem5pG45Z2Q5qCHCnZhciB4ID0gMCwgeSA9IDA7Ci8v6K6w5b2V5oyJ6ZSu6KKr5oyJ5LiL5pe255qE5oKs5rWu56qX5L2N572uCnZhciB3aW5kb3dYLCB3aW5kb3dZOwovL+iusOW9leaMiemUruiiq+aMieS4i+eahOaXtumXtOS7peS+v+WIpOaWremVv+aMieetieWKqOS9nAp2YXIgZG93blRpbWU7CndpbmRvdy5hY3Rpb24uc2V0T25Ub3VjaExpc3RlbmVyKGZ1bmN0aW9uKHZpZXcsIGV2ZW50KXsKICAgIHN3aXRjaChldmVudC5nZXRBY3Rpb24oKSl7CiAgICAgICAgY2FzZSBldmVudC5BQ1RJT05fRE9XTjoKICAgICAgICAgICAgeCA9IGV2ZW50LmdldFJhd1goKTsKICAgICAgICAgICAgeSA9IGV2ZW50LmdldFJhd1koKTsKICAgICAgICAgICAgd2luZG93WCA9IHdpbmRvdy5nZXRYKCk7CiAgICAgICAgICAgIHdpbmRvd1kgPSB3aW5kb3cuZ2V0WSgpOwogICAgICAgICAgICBkb3duVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBjYXNlIGV2ZW50LkFDVElPTl9NT1ZFOgogICAgICAgICAgICAvL+enu+WKqOaJi+aMh+aXtuiwg+aVtOaCrOa1rueql+S9jee9rgogICAgICAgICAgICB3aW5kb3cuc2V0UG9zaXRpb24od2luZG93WCArIChldmVudC5nZXRSYXdYKCkgLSB4KSwKICAgICAgICAgICAgICAgIHdpbmRvd1kgKyAoZXZlbnQuZ2V0UmF3WSgpIC0geSkpOwogICAgICAgICAgICAvL+WmguaenOaMieS4i+eahOaXtumXtOi2hei/hzEuNeenkuWIpOaWreS4uumVv+aMie+8jOmAgOWHuuiEmuacrAogICAgICAgICAgICAvL2lmKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gZG93blRpbWUgPiAxNTAwKXsKICAgICAgICAgICAgICAgIC8vZXhpdCgpOwogICAgICAgICAgICAvL30KICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgY2FzZSBldmVudC5BQ1RJT05fVVA6CiAgICAgICAgICAgIC8v5omL5oyH5by56LW35pe25aaC5p6c5YGP56e75b6I5bCP5YiZ5Yik5pat5Li654K55Ye7CiAgICAgICAgICAgIGlmKE1hdGguYWJzKGV2ZW50LmdldFJhd1koKSAtIHkpIDwgNSAmJiBNYXRoLmFicyhldmVudC5nZXRSYXdYKCkgLSB4KSA8IDUpewogICAgICAgICAgICAgICAgb25DbGljaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIHRydWU7Cn0pOwpia3o9MDsKZnVuY3Rpb24gb25DbGljaygpewogICAvKiBpZihia3o9PTApewogICAgICAgIGJrej0xOwogICAgICAgIHdpbmRvdy5hY3Rpb24udGV4dCgiLi4iKTsqLwogICAgdGhyZWFkcy5zdGFydChmdW5jdGlvbigpewogICAgICAgIOmAieaLqSgpOwogICAgICAgLyogYmt6PTA7CiAgICAgICB1aS5ydW4oZnVuY3Rpb24oKXsKICAgICAgICB3aW5kb3cuYWN0aW9uLnRleHQoIkNBIik7CiAgICAgICB9KTsqLwogICAgfSk7fQovL30KCg==");
b=b64("ZnVuY3Rpb24g6YCJ5oupKCl7CnZhciBpID0gZGlhbG9ncy5zZWxlY3QoIuivt+mAieaLqeS4gOS4qumAiemhuSIsamIpOwppZihpID49IDApewogICBlbmdpbmVzLmV4ZWNTY3JpcHQoInRwIixucltpXSk7Cn1lbHNlewogICAgdG9hc3QoIuaCqOWPlua2iOS6humAieaLqSIpOwp9Cn0KZnVuY3Rpb24gYjY0KHN0cil7CnJldHVybiBqYXZhLmxhbmcuU3RyaW5nKGFuZHJvaWQudXRpbC5CYXNlNjQuZGVjb2RlKGphdmEubGFuZy5TdHJpbmcoc3RyKS5nZXRCeXRlcygpLDApKTsKfQoKCgp3aGlsZSh0cnVlKXsKICAgIHNsZWVwKDExMSk7Cn0K");
path="/sdcard/脚本/";
pa2="/sdcard/脚本/打包后脚本.js";
var jsFiles = files.listDir(path, function(name){
    return name.endsWith(".js") && files.isFile(files.join(path, name));
});
jsFiles=jsFiles.sort(
    function compareFunction(param1, param2) {
        return param1.localeCompare(param2,"zh");
    }
);//按拼音排序

var nr=new Array();
var nm=new Array();
for(i in jsFiles){
nr[i]=ec(files.read(path+jsFiles[i]));
nm[i]='"'+jsFiles[i].split(".js")[0]+'"';
}
t1="var jb=["+nm.join(",")+"];";
t2="var nr=[\n"+nr.join(",\n")+"\n];";
files.write(pa2,xa+xdjs+"\n"+t1+"\n"+t2+xb);
toast("ok");




function ec(str){
 return 'b64("'+java.lang.String(android.util.Base64.encode(java.lang.String(str).getBytes(),0)).replace('\n', '')+'")';
}
function b64(str){
return java.lang.String(android.util.Base64.decode(java.lang.String(str).getBytes(),0));
}
```
